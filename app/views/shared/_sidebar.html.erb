<div id="sidebar" class="sidebar sidebar-expanded bg-gray-50 border-r border-gray-200 transition-all duration-300 ease-in-out flex flex-col">
  <!-- Toggle Button -->
  <button id="toggle-sidebar" class="toggle-btn p-2 hover:bg-gray-100 rounded-md transition-colors flex flex-row justify-end">
    <svg class="sidebar-icon w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
  </button>

  <!-- Main Navigation -->
  <nav class="nav-section mt-4">
    <!-- New Chat -->
    <%= link_to new_chat_path, class: "nav-item group flex items-center p-3 rounded-lg hover:bg-orange-100 transition-colors" do %>
      <div class="nav-icon bg-orange-500 text-white p-2 rounded-full flex-shrink-0">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
        </svg>
      </div>
      <span class="nav-text ml-3 font-medium text-gray-700 group-hover:text-orange-700">New chat</span>
    <% end %>

    <!-- Chats -->
    <%= link_to chats_path, class: "nav-item group flex items-center p-3 rounded-lg hover:bg-gray-100 transition-colors" do %>
      <div class="nav-icon p-2 flex-shrink-0">
        <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
        </svg>
      </div>
      <span class="nav-text ml-3 text-gray-700 group-hover:text-gray-900">Chats</span>
    <% end %>

    <!-- Projects -->
    <%= link_to projects_path, class: "nav-item group flex items-center p-3 rounded-lg hover:bg-gray-100 transition-colors" do %>
      <div class="nav-icon p-2 flex-shrink-0">
        <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
        </svg>
      </div>
      <span class="nav-text ml-3 text-gray-700 group-hover:text-gray-900">Projects</span>
    <% end %>
  </nav>

  <!-- Recent Chats Container -->
  <div class="recent-chats-container">
    <!-- Spacer -->
    <hr class="spacer">

    <!-- Recent Chats -->
    <div class="recent-chats-section mt-8">
      <h3 class="recent-chats-title px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Recents</h3>
      <div class="recent-chats-list space-y-1">
        <% recent_chats.each do |chat| %>
          <%= link_to chat_path(chat), class: "recent-chat-item group flex items-center p-2 rounded-lg hover:bg-gray-100 transition-colors" do %>
            <span class="recent-chat-text text-sm text-gray-600 group-hover:text-gray-900 truncate">
              <%= chat.title.present? ? chat.title : "Untitled Chat" %>
            </span>
          <% end %>
        <% end %>
        
        <% if recent_chats.empty? %>
          <div class="recent-chat-item p-2">
            <span class="recent-chat-text text-sm text-gray-400 italic">No recent chats</span>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>